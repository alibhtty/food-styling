import*as THREE from"./three.module.js";import{OBJLoader}from"./OBJLoader.js";var container,camera,scene,renderer,object,xOffset,yOffset,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,initial=!0,rotationIncrement=.035,rotationRange=.4;init(),animate();var btn=document.getElementById("request");function permission(){"undefined"!=typeof DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then(e=>{"granted"==e&&(document.getElementById("request").style.visibility="hidden")}).catch(console.error):document.getElementById("request").style.visibility="hidden"}function init(){container=document.getElementById("homepageHero"),(camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1500)).position.z=520,scene=new THREE.Scene;var e=new THREE.AmbientLight(16777215,1);scene.add(e);var n=new THREE.PointLight(16777215,1);camera.add(n),scene.add(camera);var i=new THREE.PlaneGeometry(5e3,5e3,1,1),o=new THREE.MeshPhongMaterial({color:0,shininess:150}),t=new THREE.Mesh(i,o);t.rotation.x=-.5*Math.PI,t.receiveShadow=!0,t.position.y=-160,scene.add(t);var r=new THREE.PointLight(4315361,.6,0,0);r.position.set(0,200,-100),scene.add(r);var a=(new THREE.TextureLoader).load(site+"/wp/wp-content/themes/deadmau5/js/components/neon4.png"),s=new THREE.MeshPhongMaterial({map:a,color:352100,specular:4315361,shininess:30,flatShading:!0,emissive:352100,emissiveMap:a});(new OBJLoader).load(site+"/wp/wp-content/themes/deadmau5/js/components/newHead6.obj",(function(e){(object=e).traverse((function(e){e.isMesh&&(e.material=s)})),object.position.y=-50,scene.add(object)}),onProgress,onError),(renderer=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight-48),container.appendChild(renderer.domElement),document.addEventListener("mousemove",onDocumentMouseMove,!1),window.addEventListener("deviceorientation",handleOrientation),window.addEventListener("resize",onWindowResize,!1)}function onProgress(e){if(e.lengthComputable){var n=e.loaded/e.total*100;document.getElementById("preloadCounter").textContent=Math.round(n,2)+"%",n>=99&&document.getElementById("preloadCounter").remove()}}function onError(){}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight-48)}function onDocumentMouseMove(e){mouseX=(e.clientX-windowHalfX)/2,mouseY=(e.clientY-windowHalfY)/2}function handleOrientation(e){initial&&(yOffset=e.beta,xOffset=e.gamma,initial=!1);var n=e.beta-yOffset,i=e.gamma-xOffset;mouseY=10*n.toFixed(2),mouseX=10*i.toFixed(2)}function animate(){requestAnimationFrame(animate),render()}function render(){mouseX>220&&(mouseX=220),mouseX<-220&&(mouseX=-220),mouseY>220&&(mouseY=220),mouseY<-220&&(mouseY=-220),camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y)+10,camera.lookAt(scene.position),renderer.render(scene,camera)}btn&&(btn.addEventListener("click",permission),permission());